<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
"http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd" [
<!ENTITY mathml "http://www.w3.org/1998/Math/MathML">
]>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xlink="http://www.w3.org/1999/xlink" >


  <head>
    <title>Section5.2</title>
    <link rel="stylesheet" type="text/css" href="graphicstyle.css" />
    <script type="text/javascript" src="bookax1.js" />
  </head>

  <body>
<a href="book-contents.xhtml" style="margin-right: 10px;">Book Contents</a><a href="section-5.1.xhtml" style="margin-right: 10px;">Previous Section 5.1 Immediate and Delayed Assignments</a><a href="section-5.3.xhtml" style="margin-right: 10px;">Next Section 5.3 if-then-else</a>
<a href="book-index.xhtml">Book Index</a><div class="section"  id="sec-5.2">
<h2 class="sectiontitle">5.2  Blocks</h2>


<a name="ugLangBlocks" class="label"/>


<p>A <span class="italic">block</span> is a sequence of expressions evaluated in the order that
they appear, except as modified by control expressions such as
<span class="teletype">break</span>, <span class="index">break</span><a name="chapter-5-9"/> <span class="teletype">return</span>, <span class="index">return</span><a name="chapter-5-10"/> <span class="teletype">iterate</span> and
<span class="index">iterate</span><a name="chapter-5-11"/> <span class="teletype">if-then-else</span> constructions.  The value of a block is
the value of the expression last evaluated in the block.
</p>


<p>To leave a block early, use ``<span class="teletype">=></span>''.  For example,  <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><mi>i</mi><mo>&lt;</mo><mn>0</mn><mo>=</mo><mo>&gt;</mo><mi>x</mi></mrow></mstyle></math>.  The
expression before the ``<span class="teletype">=></span>'' must evaluate to <span class="teletype">true</span> or <span class="teletype">false</span>.
The expression following the ``<span class="teletype">=></span>'' is the return value for the block.
</p>


<p>A block can be constructed in two ways:
</p>



<ol>
<li>
 the expressions can be separated by semicolons
and the resulting expression surrounded by parentheses, and
</li>
<li> the expressions can be written on succeeding lines with each line
indented the same number of spaces (which must be greater than zero).
<span class="index">indentation</span><a name="chapter-5-12"/>
A block entered in this form is
called a <span class="italic">pile</span>.
</li>
</ol>


<p>Only the first form is available if you are entering expressions
directly to Axiom.  Both forms are available in <span style="font-weight: bold;">.input</span> files.
</p>




<div class="boxed2">


<div class="boxed">



<p>The syntax for a simple block of expressions entered interactively is
</p>



<div class="center" style="text-align: center;">


<p><span class="teletype">(  <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><msub><mrow><mtext mathvariant='sans-serif-italic'>expression</mtext></mrow><mn>1</mn></msub></mrow></mstyle></math>;  <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><msub><mrow><mtext mathvariant='sans-serif-italic'>expression</mtext></mrow><mn>2</mn></msub></mrow></mstyle></math>; ...; 
 <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><msub><mrow><mtext mathvariant='sans-serif-italic'>expression</mtext></mrow><mi>N</mi></msub></mrow></mstyle></math> )</span>
</p>



</div>


<p>The value returned by a block is the value of an <span class="teletype">=></span> expression,
or  <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><msub><mrow><mtext mathvariant='sans-serif-italic'>expression</mtext></mrow><mi>N</mi></msub></mrow></mstyle></math> if no <span class="teletype">=></span> is encountered.<br/>
</p>



</div>
</div>



<p>In <span style="font-weight: bold;">.input</span> files, blocks can also be written using piles.  The
examples throughout this book are assumed to come from <span style="font-weight: bold;">.input</span> files.
</p>


<p>In this example, we assign a rational number to  <math xmlns="&mathml;" mathsize="big"><mstyle><mi>a</mi></mstyle></math> using a block
consisting of three expressions.  This block is written as a pile.
Each expression in the pile has the same indentation, in this case two
spaces to the right of the first line.
</p>



<div class="verbatim"><br />
a&nbsp;:=<br />
&nbsp;&nbsp;i&nbsp;:=&nbsp;gcd(234,672)<br />
&nbsp;&nbsp;i&nbsp;:=&nbsp;3*i**5&nbsp;-&nbsp;i&nbsp;+&nbsp;1<br />
&nbsp;&nbsp;1&nbsp;/&nbsp;i<br />
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mfrac><mn>1</mn><mn>23323</mn></mfrac></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Fraction Integer
</div>



<p>Here is the same block written on one line.  This is how you are
required to enter it at the input prompt.
</p>



<div id="spadComm5-16" class="spadComm" >
<form id="formComm5-16" action="javascript:makeRequest('5-16');" >
<input id="comm5-16" type="text" class="command" style="width: 35em;" value="a := (i := gcd(234,672); i := 3*i**5 - i + 1; 1 / i)" />
</form>
<span id="commSav5-16" class="commSav" >a := (i := gcd(234,672); i := 3*i**5 - i + 1; 1 / i)</span>
<div id="mathAns5-16" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mfrac><mn>1</mn><mn>23323</mn></mfrac></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Fraction Integer
</div>



<p>Blocks can be used to put several expressions on one line.  The value
returned is that of the last expression.
</p>



<div id="spadComm5-17" class="spadComm" >
<form id="formComm5-17" action="javascript:makeRequest('5-17');" >
<input id="comm5-17" type="text" class="command" style="width: 22em;" value="(a := 1; b := 2; c := 3; [a,b,c])" />
</form>
<span id="commSav5-17" class="commSav" >(a := 1; b := 2; c := 3; [a,b,c])</span>
<div id="mathAns5-17" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>[</mo><mn>1</mn><mo>,</mo><mn>2</mn><mo>,</mo><mn>3</mn><mo>]</mo></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: List PositiveInteger
</div>



<p>Axiom gives you two ways of writing a block and the preferred way in
an <span style="font-weight: bold;">.input</span> file is to use a pile.  <span class="index">file:input</span><a name="chapter-5-13"/> Roughly
speaking, a pile is a block whose constituent expressions are indented
the same amount.  You begin a pile by starting a new line for the
first expression, indenting it to the right of the previous line.  You
then enter the second expression on a new line, vertically aligning it
with the first line. And so on.  If you need to enter an inner pile,
further indent its lines to the right of the outer pile.  Axiom knows
where a pile ends.  It ends when a subsequent line is indented to the
left of the pile or the end of the file.
</p>


<p>Blocks can be used to perform several steps before an assignment
(immediate or delayed) is made.
</p>



<div class="verbatim"><br />
d&nbsp;:=<br />
&nbsp;&nbsp;&nbsp;c&nbsp;:=&nbsp;a**2&nbsp;+&nbsp;b**2<br />
&nbsp;&nbsp;&nbsp;sqrt(c&nbsp;*&nbsp;1.3)<br />
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mn>2</mn><mo>.</mo><mn>5495097567</mn><mn>96392415</mn></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Float
</div>



<p>Blocks can be used in the arguments to functions.  (Here  <math xmlns="&mathml;" mathsize="big"><mstyle><mi>h</mi></mstyle></math> is
assigned  <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><mn>2</mn><mo>.</mo><mn>1</mn><mo>+</mo><mn>3</mn><mo>.</mo><mn>5</mn></mrow></mstyle></math>.)
</p>



<div class="verbatim"><br />
h&nbsp;:=&nbsp;2.1&nbsp;+<br />
&nbsp;&nbsp;&nbsp;1.0<br />
&nbsp;&nbsp;&nbsp;3.5<br />
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mn>5</mn><mo>.</mo><mn>6</mn></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Float
</div>



<p>Here the second argument to <span style="font-weight: bold;">eval</span> is  <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><mi>x</mi><mo>=</mo><mi>z</mi></mrow></mstyle></math>, where the value of
 <math xmlns="&mathml;" mathsize="big"><mstyle><mi>z</mi></mstyle></math> is computed in the first line of the block starting on the second
line.
</p>



<div class="verbatim"><br />
eval(x**2&nbsp;-&nbsp;x*y**2,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;:=&nbsp;%pi/2.0&nbsp;-&nbsp;exp(4.1)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;z<br />
&nbsp;&nbsp;&nbsp;)<br />
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mrow><mrow><mn>58</mn><mo>.</mo><mn>7694912705</mn><mn>67072878</mn></mrow><mspace width="0.5 em" /><mrow><msup><mi>y</mi><mn>2</mn></msup></mrow></mrow><mo>+</mo><mrow><mn>3453</mn><mo>.</mo><mn>8531042012</mn><mn>59382</mn></mrow></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Polynomial Float
</div>



<p>Blocks can be used in the clauses of <span class="teletype">if-then-else</span> expressions 
(see <a href="section-5.3.xhtml#ugLangIf" class="ref" >ugLangIf</a> ).
</p>




<div id="spadComm5-18" class="spadComm" >
<form id="formComm5-18" action="javascript:makeRequest('5-18');" >
<input id="comm5-18" type="text" class="command" style="width: 34em;" value="if h > 3.1 then 1.0 else (z := cos(h); max(z,0.5))" />
</form>
<span id="commSav5-18" class="commSav" >if h > 3.1 then 1.0 else (z := cos(h); max(z,0.5))</span>
<div id="mathAns5-18" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mn>1</mn><mo>.</mo><mn>0</mn></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Float
</div>



<p>This is the pile version of the last block.
</p>



<div class="verbatim"><br />
if&nbsp;h&nbsp;&gt;&nbsp;3.1&nbsp;then<br />
&nbsp;&nbsp;&nbsp;&nbsp;1.0<br />
&nbsp;&nbsp;else<br />
&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;:=&nbsp;cos(h)<br />
&nbsp;&nbsp;&nbsp;&nbsp;max(z,0.5)<br />
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mn>1</mn><mo>.</mo><mn>0</mn></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Float
</div>



<p>Blocks can be nested.
</p>



<div id="spadComm5-19" class="spadComm" >
<form id="formComm5-19" action="javascript:makeRequest('5-19');" >
<input id="comm5-19" type="text" class="command" style="width: 46em;" value="a := (b := factorial(12); c := (d := eulerPhi(22); factorial(d));b+c)" />
</form>
<span id="commSav5-19" class="commSav" >a := (b := factorial(12); c := (d := eulerPhi(22); factorial(d));b+c)</span>
<div id="mathAns5-19" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mn>482630400</mn></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: PositiveInteger
</div>



<p>This is the pile version of the last block.
</p>



<div class="verbatim"><br />
a&nbsp;:=<br />
&nbsp;&nbsp;b&nbsp;:=&nbsp;factorial(12)<br />
&nbsp;&nbsp;c&nbsp;:=<br />
&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;:=&nbsp;eulerPhi(22)<br />
&nbsp;&nbsp;&nbsp;&nbsp;factorial(d)<br />
&nbsp;&nbsp;b+c<br />
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mn>482630400</mn></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: PositiveInteger
</div>



<p>Since  <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><mi>c</mi><mo>+</mo><mi>d</mi></mrow></mstyle></math> does equal  <math xmlns="&mathml;" mathsize="big"><mstyle><mn>3628855</mn></mstyle></math>,  <math xmlns="&mathml;" mathsize="big"><mstyle><mi>a</mi></mstyle></math> has the value of  <math xmlns="&mathml;" mathsize="big"><mstyle><mi>c</mi></mstyle></math> and the
last line is never evaluated.
</p>



<div class="verbatim"><br />
a&nbsp;:=<br />
&nbsp;&nbsp;c&nbsp;:=&nbsp;factorial&nbsp;10<br />
&nbsp;&nbsp;d&nbsp;:=&nbsp;fibonacci&nbsp;10<br />
&nbsp;&nbsp;c&nbsp;+&nbsp;d&nbsp;=&nbsp;3628855&nbsp;=&gt;&nbsp;c<br />
&nbsp;&nbsp;d<br />
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mn>3628800</mn></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: PositiveInteger
</div>





</div><a href="book-contents.xhtml" style="margin-right: 10px;">Book Contents</a>
<a href="section-5.1.xhtml" style="margin-right: 10px;">Previous Section 5.1 Immediate and Delayed Assignments</a><a href="section-5.3.xhtml" style="margin-right: 10px;">Next Section 5.3 if-then-else</a>
<a href="book-index.xhtml">Book Index</a></body>
</html>