<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
"http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd" [
<!ENTITY mathml "http://www.w3.org/1998/Math/MathML">
]>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xlink="http://www.w3.org/1999/xlink" >


  <head>
    <title>Section9.50</title>
    <link rel="stylesheet" type="text/css" href="graphicstyle.css" />
    <script type="text/javascript" src="bookax1.js" />
  </head>

  <body>
<a href="book-contents.xhtml" style="margin-right: 10px;">Book Contents</a><a href="section-9.49.xhtml" style="margin-right: 10px;">Previous Section 9.49 Magma</a><a href="section-9.51.xhtml" style="margin-right: 10px;">Next Section 9.51 MappingPackage1</a>
<a href="book-index.xhtml">Book Index</a><div class="section"  id="sec-9.50">
<h2 class="sectiontitle">9.50  MakeFunction</h2>


<a name="MakeFunctionXmpPage" class="label"/>


<p>It is sometimes useful to be able to define a function given by
the result of a calculation.
</p>


<p>Suppose that you have obtained the following expression after several
computations and that you now want to tabulate the numerical values of
<span class="teletype">f</span> for <span class="teletype">x</span> between <span class="teletype">-1</span> and <span class="teletype">+1</span> with increment 
<span class="teletype">0.1</span>.
</p>




<div id="spadComm9-124" class="spadComm" >
<form id="formComm9-124" action="javascript:makeRequest('9-124');" >
<input id="comm9-124" type="text" class="command" style="width: 35em;" value="expr := (x - exp x + 1)**2 * (sin(x**2) * x + 1)**3 " />
</form>
<span id="commSav9-124" class="commSav" >expr := (x - exp x + 1)**2 * (sin(x**2) * x + 1)**3 </span>
<div id="mathAns9-124" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtable><mtr><mtd><mrow><mrow><mo>(</mo><mrow><mrow><msup><mi>x</mi><mn>3</mn></msup></mrow><mspace width="0.5 em" /><mrow><msup><mrow><msup><mi>e</mi><mi>x</mi></msup></mrow><mn>2</mn></msup></mrow></mrow><mo>+</mo><mrow><mrow><mo>(</mo><mo>-</mo><mrow><mn>2</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>4</mn></msup></mrow></mrow><mo>-</mo><mrow><mn>2</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>3</mn></msup></mrow></mrow><mo>)</mo></mrow><mspace width="0.5 em" /><mrow><msup><mi>e</mi><mi>x</mi></msup></mrow></mrow><mo>+</mo><mrow><msup><mi>x</mi><mn>5</mn></msup></mrow><mo>+</mo><mrow><mn>2</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>4</mn></msup></mrow></mrow><mo>+</mo><mrow><msup><mi>x</mi><mn>3</mn></msup></mrow><mo>)</mo></mrow><mspace width="0.5 em" /><mrow><msup><mrow><mo>sin</mo><mo>(</mo><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><mo>)</mo></mrow><mn>3</mn></msup></mrow></mrow><mo>+</mo></mtd></mtr><mtr><mtd></mtd></mtr><mtr><mtd><mrow><mrow><mo>(</mo><mrow><mn>3</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><mspace width="0.5 em" /><mrow><msup><mrow><msup><mi>e</mi><mi>x</mi></msup></mrow><mn>2</mn></msup></mrow></mrow><mo>+</mo><mrow><mrow><mo>(</mo><mo>-</mo><mrow><mn>6</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>3</mn></msup></mrow></mrow><mo>-</mo><mrow><mn>6</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow></mrow><mo>)</mo></mrow><mspace width="0.5 em" /><mrow><msup><mi>e</mi><mi>x</mi></msup></mrow></mrow><mo>+</mo><mrow><mn>3</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>4</mn></msup></mrow></mrow><mo>+</mo><mrow><mn>6</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>3</mn></msup></mrow></mrow><mo>+</mo><mrow><mn>3</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow></mrow><mo>)</mo></mrow><mspace width="0.5 em" /><mrow><msup><mrow><mo>sin</mo><mo>(</mo><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><mo>)</mo></mrow><mn>2</mn></msup></mrow></mrow><mo>+</mo></mtd></mtr><mtr><mtd></mtd></mtr><mtr><mtd><mrow><mrow><mo>(</mo><mrow><mn>3</mn><mspace width="0.5 em" /><mi>x</mi><mspace width="0.5 em" /><mrow><msup><mrow><msup><mi>e</mi><mi>x</mi></msup></mrow><mn>2</mn></msup></mrow></mrow><mo>+</mo><mrow><mrow><mo>(</mo><mo>-</mo><mrow><mn>6</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow></mrow><mo>-</mo><mrow><mn>6</mn><mspace width="0.5 em" /><mi>x</mi></mrow><mo>)</mo></mrow><mspace width="0.5 em" /><mrow><msup><mi>e</mi><mi>x</mi></msup></mrow></mrow><mo>+</mo><mrow><mn>3</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>3</mn></msup></mrow></mrow><mo>+</mo><mrow><mn>6</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow></mrow><mo>+</mo><mrow><mn>3</mn><mspace width="0.5 em" /><mi>x</mi></mrow><mo>)</mo></mrow><mspace width="0.5 em" /><mrow><mo>sin</mo><mo>(</mo><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><mo>)</mo></mrow></mrow><mo>+</mo><mrow><msup><mrow><msup><mi>e</mi><mi>x</mi></msup></mrow><mn>2</mn></msup></mrow><mo>+</mo></mtd></mtr><mtr><mtd></mtd></mtr><mtr><mtd><mrow><mrow><mo>(</mo><mo>-</mo><mrow><mn>2</mn><mspace width="0.5 em" /><mi>x</mi></mrow><mo>-</mo><mn>2</mn><mo>)</mo></mrow><mspace width="0.5 em" /><mrow><msup><mi>e</mi><mi>x</mi></msup></mrow></mrow><mo>+</mo><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><mo>+</mo><mrow><mn>2</mn><mspace width="0.5 em" /><mi>x</mi></mrow><mo>+</mo><mn>1</mn></mtd></mtr></mtable></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Expression Integer
</div>



<p>You could, of course, use the function <span class="spadfunFrom" >eval</span><span class="index">eval</span><a name="chapter-9-56"/><span class="index">Expression</span><a name="chapter-9-57"/>
within a loop and evaluate <span class="teletype">expr</span> twenty-one times, but this would
be quite slow.  A better way is to create a numerical function <span class="teletype">f</span>
such that <span class="teletype">f(x)</span> is defined by the expression <span class="teletype">expr</span> above,
but without retyping <span class="teletype">expr</span>!  The package <span class="teletype">MakeFunction</span>
provides the operation <span class="spadfunFrom" >function</span><span class="index">function</span><a name="chapter-9-58"/><span class="index">MakeFunction</span><a name="chapter-9-59"/> which does
exactly this.
</p>


<p>Issue this to create the function <span class="teletype">f(x)</span> given by <span class="teletype">expr</span>.
</p>




<div id="spadComm9-125" class="spadComm" >
<form id="formComm9-125" action="javascript:makeRequest('9-125');" >
<input id="comm9-125" type="text" class="command" style="width: 14em;" value="function(expr, f, x) " />
</form>
<span id="commSav9-125" class="commSav" >function(expr, f, x) </span>
<div id="mathAns9-125" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mi>f</mi></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Symbol
</div>



<p>To tabulate <span class="teletype">expr</span>, we can now quickly evaluate <span class="teletype">f</span> 21 times.
</p>




<div id="spadComm9-126" class="spadComm" >
<form id="formComm9-126" action="javascript:makeRequest('9-126');" >
<input id="comm9-126" type="text" class="command" style="width: 27em;" value="tbl := [f(0.1 * i - 1) for i in 0..20]; " />
</form>
<span id="commSav9-126" class="commSav" >tbl := [f(0.1 * i - 1) for i in 0..20]; </span>
<div id="mathAns9-126" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtable><mtr><mtd><mo>[</mo><mrow><mn>0</mn><mo>.</mo><mn>0005391844</mn><mspace width="0.5 em" /><mn>0362701574</mn></mrow><mo>,</mo><mrow><mn>0</mn><mo>.</mo><mn>0039657551</mn><mspace width="0.5 em" /><mn>1844206653</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd><mrow><mn>0</mn><mo>.</mo><mn>0088545187</mn><mspace width="0.5 em" /><mn>4833983689</mn><mspace width="0.5 em" /><mn>2</mn></mrow><mo>,</mo><mrow><mn>0</mn><mo>.</mo><mn>0116524883</mn><mspace width="0.5 em" /><mn>0907069695</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd><mrow><mn>0</mn><mo>.</mo><mn>0108618220</mn><mspace width="0.5 em" /><mn>9245751364</mn><mspace width="0.5 em" /><mn>5</mn></mrow><mo>,</mo><mrow><mn>0</mn><mo>.</mo><mn>0076366823</mn><mspace width="0.5 em" /><mn>2120869965</mn><mspace width="0.5 em" /><mn>06</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd><mrow><mn>0</mn><mo>.</mo><mn>0040584985</mn><mspace width="0.5 em" /><mn>7597822062</mn><mspace width="0.5 em" /><mn>55</mn></mrow><mo>,</mo><mrow><mn>0</mn><mo>.</mo><mn>0015349542</mn><mspace width="0.5 em" /><mn>8910500836</mn><mspace width="0.5 em" /><mn>48</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd><mrow><mn>0</mn><mo>.</mo><mn>0003424903</mn><mspace width="0.5 em" /><mn>1549879905</mn><mspace width="0.5 em" /><mn>716</mn></mrow><mo>,</mo><mrow><mn>0</mn><mo>.</mo><mn>0000233304</mn><mspace width="0.5 em" /><mn>8276098819</mn><mspace width="0.5 em" /><mn>6001</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd><mrow><mn>0</mn><mo>.</mo><mn>0</mn></mrow><mo>,</mo><mrow><mn>0</mn><mo>.</mo><mn>0000268186</mn><mspace width="0.5 em" /><mn>8782862599</mn><mspace width="0.5 em" /><mn>4229</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd><mrow><mn>0</mn><mo>.</mo><mn>0004691571</mn><mspace width="0.5 em" /><mn>3720051642</mn><mspace width="0.5 em" /><mn>621</mn></mrow><mo>,</mo><mrow><mn>0</mn><mo>.</mo><mn>0026924576</mn><mspace width="0.5 em" /><mn>5968519586</mn><mspace width="0.5 em" /><mn>08</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd><mrow><mn>0</mn><mo>.</mo><mn>0101486881</mn><mspace width="0.5 em" /><mn>7369135148</mn><mspace width="0.5 em" /><mn>8</mn></mrow><mo>,</mo><mrow><mn>0</mn><mo>.</mo><mn>0313833725</mn><mspace width="0.5 em" /><mn>8543810564</mn><mspace width="0.5 em" /><mn>3</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd><mrow><mn>0</mn><mo>.</mo><mn>0876991144</mn><mspace width="0.5 em" /><mn>5154615297</mn><mspace width="0.5 em" /><mn>9</mn></mrow><mo>,</mo><mrow><mn>0</mn><mo>.</mo><mn>2313019789</mn><mspace width="0.5 em" /><mn>3439968362</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd><mrow><mn>0</mn><mo>.</mo><mn>5843743955</mn><mspace width="0.5 em" /><mn>958098772</mn></mrow><mo>,</mo><mrow><mn>1</mn><mo>.</mo><mn>4114930171</mn><mspace width="0.5 em" /><mn>992819197</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd><mrow><mn>3</mn><mo>.</mo><mn>2216948276</mn><mspace width="0.5 em" /><mn>75164252</mn></mrow><mo>]</mo></mtd></mtr></mtable></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: List Float
</div>



<p>Use the list <span class="teletype">[x1,...,xn]</span> as the
third argument to <span class="spadfunFrom" >function</span><span class="index">function</span><a name="chapter-9-60"/><span class="index">MakeFunction</span><a name="chapter-9-61"/>
to create a multivariate function <span class="teletype">f(x1,...,xn)</span>.
</p>




<div id="spadComm9-127" class="spadComm" >
<form id="formComm9-127" action="javascript:makeRequest('9-127');" >
<input id="comm9-127" type="text" class="command" style="width: 27em;" value="e := (x - y + 1)**2 * (x**2 * y + 1)**2 " />
</form>
<span id="commSav9-127" class="commSav" >e := (x - y + 1)**2 * (x**2 * y + 1)**2 </span>
<div id="mathAns9-127" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtable><mtr><mtd><mrow><mrow><msup><mi>x</mi><mn>4</mn></msup></mrow><mspace width="0.5 em" /><mrow><msup><mi>y</mi><mn>4</mn></msup></mrow></mrow><mo>+</mo><mrow><mrow><mo>(</mo><mo>-</mo><mrow><mn>2</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>5</mn></msup></mrow></mrow><mo>-</mo><mrow><mn>2</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>4</mn></msup></mrow></mrow><mo>+</mo><mrow><mn>2</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow></mrow><mo>)</mo></mrow><mspace width="0.5 em" /><mrow><msup><mi>y</mi><mn>3</mn></msup></mrow></mrow><mo>+</mo><mrow><mrow><mo>(</mo><mrow><msup><mi>x</mi><mn>6</mn></msup></mrow><mo>+</mo><mrow><mn>2</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>5</mn></msup></mrow></mrow><mo>+</mo><mrow><msup><mi>x</mi><mn>4</mn></msup></mrow><mo>-</mo><mrow><mn>4</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>3</mn></msup></mrow></mrow><mo>-</mo><mrow><mn>4</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow></mrow><mo>+</mo><mn>1</mn><mo>)</mo></mrow><mspace width="0.5 em" /><mrow><msup><mi>y</mi><mn>2</mn></msup></mrow></mrow><mo>+</mo></mtd></mtr><mtr><mtd></mtd></mtr><mtr><mtd><mrow><mrow><mo>(</mo><mrow><mn>2</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>4</mn></msup></mrow></mrow><mo>+</mo><mrow><mn>4</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>3</mn></msup></mrow></mrow><mo>+</mo><mrow><mn>2</mn><mspace width="0.5 em" /><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow></mrow><mo>-</mo><mrow><mn>2</mn><mspace width="0.5 em" /><mi>x</mi></mrow><mo>-</mo><mn>2</mn><mo>)</mo></mrow><mspace width="0.5 em" /><mi>y</mi></mrow><mo>+</mo><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><mo>+</mo><mrow><mn>2</mn><mspace width="0.5 em" /><mi>x</mi></mrow><mo>+</mo><mn>1</mn></mtd></mtr></mtable></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Polynomial Integer
</div>





<div id="spadComm9-128" class="spadComm" >
<form id="formComm9-128" action="javascript:makeRequest('9-128');" >
<input id="comm9-128" type="text" class="command" style="width: 16em;" value="function(e, g, [x, y]) " />
</form>
<span id="commSav9-128" class="commSav" >function(e, g, [x, y]) </span>
<div id="mathAns9-128" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mi>g</mi></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Symbol
</div>



<p>In the case of just two variables, they can be given as arguments
without making them into a list.
</p>




<div id="spadComm9-129" class="spadComm" >
<form id="formComm9-129" action="javascript:makeRequest('9-129');" >
<input id="comm9-129" type="text" class="command" style="width: 14em;" value="function(e, h, x, y) " />
</form>
<span id="commSav9-129" class="commSav" >function(e, h, x, y) </span>
<div id="mathAns9-129" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mi>h</mi></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Symbol
</div>



<p>Note that the functions created by <span class="spadfunFrom" >function</span><span class="index">function</span><a name="chapter-9-62"/><span class="index">MakeFunction</span><a name="chapter-9-63"/>
are not limited to floating point numbers, but can be applied to any type
for which they are defined.
</p>




<div id="spadComm9-130" class="spadComm" >
<form id="formComm9-130" action="javascript:makeRequest('9-130');" >
<input id="comm9-130" type="text" class="command" style="width: 26em;" value="m1 := squareMatrix [ [1, 2], [3, 4] ] " />
</form>
<span id="commSav9-130" class="commSav" >m1 := squareMatrix [ [1, 2], [3, 4] ] </span>
<div id="mathAns9-130" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>[</mo><mtable><mtr><mtd><mn>1</mn></mtd><mtd><mn>2</mn></mtd></mtr><mtr><mtd><mn>3</mn></mtd><mtd><mn>4</mn></mtd></mtr></mtable><mo>]</mo></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: SquareMatrix(2,Integer)
</div>





<div id="spadComm9-131" class="spadComm" >
<form id="formComm9-131" action="javascript:makeRequest('9-131');" >
<input id="comm9-131" type="text" class="command" style="width: 26em;" value="m2 := squareMatrix [ [1, 0], [-1, 1] ] " />
</form>
<span id="commSav9-131" class="commSav" >m2 := squareMatrix [ [1, 0], [-1, 1] ] </span>
<div id="mathAns9-131" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>[</mo><mtable><mtr><mtd><mn>1</mn></mtd><mtd><mn>0</mn></mtd></mtr><mtr><mtd><mo>-</mo><mn>1</mn></mtd><mtd><mn>1</mn></mtd></mtr></mtable><mo>]</mo></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: SquareMatrix(2,Integer)
</div>





<div id="spadComm9-132" class="spadComm" >
<form id="formComm9-132" action="javascript:makeRequest('9-132');" >
<input id="comm9-132" type="text" class="command" style="width: 7em;" value="h(m1, m2) " />
</form>
<span id="commSav9-132" class="commSav" >h(m1, m2) </span>
<div id="mathAns9-132" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>[</mo><mtable><mtr><mtd><mo>-</mo><mn>7836</mn></mtd><mtd><mn>8960</mn></mtd></mtr><mtr><mtd><mo>-</mo><mn>17132</mn></mtd><mtd><mn>19588</mn></mtd></mtr></mtable><mo>]</mo></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: SquareMatrix(2,Integer)
</div>



<p>For more information, see 
<a href="ugUserMakePage" class="ref" >ugUserMakePage</a>  in Section 
<a href="ugUserMakeNumber" class="ref" >ugUserMakeNumber</a> .
</p>




</div><a href="book-contents.xhtml" style="margin-right: 10px;">Book Contents</a>
<a href="section-9.49.xhtml" style="margin-right: 10px;">Previous Section 9.49 Magma</a><a href="section-9.51.xhtml" style="margin-right: 10px;">Next Section 9.51 MappingPackage1</a>
<a href="book-index.xhtml">Book Index</a></body>
</html>