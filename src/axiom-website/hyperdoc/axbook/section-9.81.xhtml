<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
"http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd" [
<!ENTITY mathml "http://www.w3.org/1998/Math/MathML">
]>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xlink="http://www.w3.org/1999/xlink" >


  <head>
    <title>Section9.81</title>
    <link rel="stylesheet" type="text/css" href="graphicstyle.css" />
    <script type="text/javascript" src="bookax1.js" />
  </head>

  <body>
<a href="book-contents.xhtml" style="margin-right: 10px;">Book Contents</a><a href="section-9.80.xhtml" style="margin-right: 10px;">Previous Section 9.80 Table</a><a href="section-9.82.xhtml" style="margin-right: 10px;">Next Section 9.82 TwoDimensionalArray</a>
<a href="book-index.xhtml">Book Index</a><div class="section"  id="sec-9.81">
<h2 class="sectiontitle">9.81  TextFile</h2>


<a name="TextFileXmpPage" class="label"/>


<p>The domain <span class="teletype">TextFile</span> allows Axiom to read and write
character data and exchange text with other programs.
This type behaves in Axiom much like a <span class="teletype">File</span> of strings,
with additional operations to cause new lines.
We give an example of how to produce an upper case copy of a file.
</p>


<p>This is the file from which we read the text.
</p>




<div id="spadComm9-175" class="spadComm" >
<form id="formComm9-175" action="javascript:makeRequest('9-175');" >
<input id="comm9-175" type="text" class="command" style="width: 31em;" value='f1: TextFile := open("/etc/group", "input")   ' />
</form>
<span id="commSav9-175" class="commSav" >f1: TextFile := open("/etc/group", "input")   </span>
<div id="mathAns9-175" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtext><mrow><mtext mathvariant='monospace'>"<mspace width="0.5em"/>/<mspace width="0.5em"/>etc<mspace width="0.5em"/>/<mspace width="0.5em"/>group<mspace width="0.5em"/>"<mspace width="0.5em"/></mtext></mrow></mtext></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: TextFile
</div>



<p>This is the file to which we write the text.
</p>




<div id="spadComm9-176" class="spadComm" >
<form id="formComm9-176" action="javascript:makeRequest('9-176');" >
<input id="comm9-176" type="text" class="command" style="width: 30em;" value='f2: TextFile := open("/tmp/MOTD", "output")  ' />
</form>
<span id="commSav9-176" class="commSav" >f2: TextFile := open("/tmp/MOTD", "output")  </span>
<div id="mathAns9-176" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtext><mrow><mtext mathvariant='monospace'>"<mspace width="0.5em"/>/<mspace width="0.5em"/>tmp<mspace width="0.5em"/>/<mspace width="0.5em"/>MOTD<mspace width="0.5em"/>"<mspace width="0.5em"/></mtext></mrow></mtext></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: TextFile
</div>



<p>Entire lines are handled using the <span class="spadfunFrom" >readLine</span><span class="index">readLine</span><a name="chapter-9-112"/><span class="index">TextFile</span><a name="chapter-9-113"/> and
<span class="spadfunFrom" >writeLine</span><span class="index">writeLine</span><a name="chapter-9-114"/><span class="index">TextFile</span><a name="chapter-9-115"/> operations.
</p>




<div id="spadComm9-177" class="spadComm" >
<form id="formComm9-177" action="javascript:makeRequest('9-177');" >
<input id="comm9-177" type="text" class="command" style="width: 12em;" value="l := readLine! f1 " />
</form>
<span id="commSav9-177" class="commSav" >l := readLine! f1 </span>
<div id="mathAns9-177" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtext><mrow><mtext mathvariant='monospace'>"<mspace width="0.5em"/>root<mspace width="0.5em"/>:<mspace width="0.5em"/>x<mspace width="0.5em"/>:<mspace width="0.5em"/>0<mspace width="0.5em"/>:<mspace width="0.5em"/>root<mspace width="0.5em"/>"<mspace width="0.5em"/></mtext></mrow></mtext></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: String
</div>





<div id="spadComm9-178" class="spadComm" >
<form id="formComm9-178" action="javascript:makeRequest('9-178');" >
<input id="comm9-178" type="text" class="command" style="width: 19em;" value="writeLine!(f2, upperCase l) " />
</form>
<span id="commSav9-178" class="commSav" >writeLine!(f2, upperCase l) </span>
<div id="mathAns9-178" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtext><mrow><mtext mathvariant='monospace'>"<mspace width="0.5em"/>ROOT<mspace width="0.5em"/>:<mspace width="0.5em"/>X<mspace width="0.5em"/>:<mspace width="0.5em"/>0<mspace width="0.5em"/>:<mspace width="0.5em"/>ROOT<mspace width="0.5em"/>"<mspace width="0.5em"/></mtext></mrow></mtext></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: String
</div>



<p>Use the <span class="spadfunFrom" >endOfFile?</span><span class="index">endOfFile?</span><a name="chapter-9-116"/><span class="index">TextFile</span><a name="chapter-9-117"/> operation to check if you
have reached the end of the file.
</p>




<div class="verbatim"><br />
while&nbsp;not&nbsp;endOfFile?&nbsp;f1&nbsp;repeat<br />
&nbsp;&nbsp;&nbsp;&nbsp;s&nbsp;:=&nbsp;readLine!&nbsp;f1<br />
&nbsp;&nbsp;&nbsp;&nbsp;writeLine!(f2,&nbsp;upperCase&nbsp;s)<br />
</div>




<div class="returnType">
Void
</div>



<p>The file <span class="teletype">f1</span> is exhausted and should be closed.
</p>




<div id="spadComm9-179" class="spadComm" >
<form id="formComm9-179" action="javascript:makeRequest('9-179');" >
<input id="comm9-179" type="text" class="command" style="width: 8em;" value="close! f1  " />
</form>
<span id="commSav9-179" class="commSav" >close! f1  </span>
<div id="mathAns9-179" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtext><mrow><mtext mathvariant='monospace'>"<mspace width="0.5em"/>/<mspace width="0.5em"/>etc<mspace width="0.5em"/>/<mspace width="0.5em"/>group<mspace width="0.5em"/>"<mspace width="0.5em"/></mtext></mrow></mtext></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: TextFile
</div>



<p>It is sometimes useful to write lines a bit at a time.  The
<span class="spadfunFrom" >write</span><span class="index">write</span><a name="chapter-9-118"/><span class="index">TextFile</span><a name="chapter-9-119"/> operation allows this.
</p>




<div id="spadComm9-180" class="spadComm" >
<form id="formComm9-180" action="javascript:makeRequest('9-180');" >
<input id="comm9-180" type="text" class="command" style="width: 14em;" value='write!(f2, "-The-")  ' />
</form>
<span id="commSav9-180" class="commSav" >write!(f2, "-The-")  </span>
<div id="mathAns9-180" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtext><mrow><mtext mathvariant='monospace'>"<mspace width="0.5em"/>-<mspace width="0.5em"/>The<mspace width="0.5em"/>-<mspace width="0.5em"/>"<mspace width="0.5em"/></mtext></mrow></mtext></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: String
</div>





<div id="spadComm9-181" class="spadComm" >
<form id="formComm9-181" action="javascript:makeRequest('9-181');" >
<input id="comm9-181" type="text" class="command" style="width: 14em;" value='write!(f2, "-End-")  ' />
</form>
<span id="commSav9-181" class="commSav" >write!(f2, "-End-")  </span>
<div id="mathAns9-181" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtext><mrow><mtext mathvariant='monospace'>"<mspace width="0.5em"/>-<mspace width="0.5em"/>End<mspace width="0.5em"/>-<mspace width="0.5em"/>"<mspace width="0.5em"/></mtext></mrow></mtext></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: String
</div>



<p>This ends the line.  This is done in a machine-dependent manner.
</p>




<div id="spadComm9-182" class="spadComm" >
<form id="formComm9-182" action="javascript:makeRequest('9-182');" >
<input id="comm9-182" type="text" class="command" style="width: 9em;" value="writeLine! f2" />
</form>
<span id="commSav9-182" class="commSav" >writeLine! f2</span>
<div id="mathAns9-182" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtext><mrow><mtext mathvariant='monospace'>"<mspace width="0.5em"/>"<mspace width="0.5em"/></mtext></mrow></mtext></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: String
</div>





<div id="spadComm9-183" class="spadComm" >
<form id="formComm9-183" action="javascript:makeRequest('9-183');" >
<input id="comm9-183" type="text" class="command" style="width: 6em;" value="close! f2" />
</form>
<span id="commSav9-183" class="commSav" >close! f2</span>
<div id="mathAns9-183" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtext><mrow><mtext mathvariant='monospace'>"<mspace width="0.5em"/>/<mspace width="0.5em"/>tmp<mspace width="0.5em"/>/<mspace width="0.5em"/>MOTD<mspace width="0.5em"/>"<mspace width="0.5em"/></mtext></mrow></mtext></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: TextFile
</div>



<p>Finally, clean up.
</p>




<div id="spadComm9-184" class="spadComm" >
<form id="formComm9-184" action="javascript:makeRequest('9-184');" >
<input id="comm9-184" type="text" class="command" style="width: 14em;" value=")system rm /tmp/MOTD" />
</form>
<span id="commSav9-184" class="commSav" >)system rm /tmp/MOTD</span>
<div id="mathAns9-184" ></div>
</div>



<p>For more information on related topics,  see
<a href="section-9.24.xhtml#FileXmpPage" class="ref" >FileXmpPage</a> ,
<a href="section-9.38.xhtml#KeyedAccessFileXmpPage" class="ref" >KeyedAccessFileXmpPage</a> , and
<a href="section-9.41.xhtml#LibraryXmpPage" class="ref" >LibraryXmpPage</a> .
</p>




</div><a href="book-contents.xhtml" style="margin-right: 10px;">Book Contents</a>
<a href="section-9.80.xhtml" style="margin-right: 10px;">Previous Section 9.80 Table</a><a href="section-9.82.xhtml" style="margin-right: 10px;">Next Section 9.82 TwoDimensionalArray</a>
<a href="book-index.xhtml">Book Index</a></body>
</html>