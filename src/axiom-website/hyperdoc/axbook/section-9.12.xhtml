<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
"http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd" [
<!ENTITY mathml "http://www.w3.org/1998/Math/MathML">
]>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xlink="http://www.w3.org/1999/xlink" >


  <head>
    <title>Section9.12</title>
    <link rel="stylesheet" type="text/css" href="graphicstyle.css" />
    <script type="text/javascript" src="bookax1.js" />
  </head>

  <body>
<a href="book-contents.xhtml" style="margin-right: 10px;">Book Contents</a><a href="section-9.11.xhtml" style="margin-right: 10px;">Previous Section 9.11 Complex</a><a href="section-9.13.xhtml" style="margin-right: 10px;">Next Section 9.13  CycleIndicators</a><a href="book-index.xhtml">Book Index</a><div class="section"  id="sec-9.12">
<h2 class="sectiontitle">9.12  ContinuedFraction</h2>


<a name="ContinuedFractionXmpPage" class="label"/>


<p>Continued fractions have been a fascinating and useful tool in
mathematics for well over three hundred years.  Axiom implements
continued fractions for fractions of any Euclidean domain.  In
practice, this usually means rational numbers.  In this section we
demonstrate some of the operations available for manipulating both
finite and infinite continued fractions.  It may be helpful if you
review <a href="section-9.76.xhtml#StreamXmpPage" class="ref" >StreamXmpPage</a>  to remind 
yourself of some of the operations with streams.
</p>


<p>The <span class="teletype">ContinuedFraction</span> domain is a field and therefore you can
add, subtract, multiply and divide the fractions.
</p>


<p>The <span class="spadfunFrom" >continuedFraction</span><span class="index">continuedFraction</span><a name="chapter-9-65"/><span class="index">ContinuedFraction</span><a name="chapter-9-66"/> operation
converts its fractional argument to a continued fraction.
</p>




<div id="spadComm9-206" class="spadComm" >
<form id="formComm9-206" action="javascript:makeRequest('9-206');" >
<input id="comm9-206" type="text" class="command" style="width: 26em;" value="c := continuedFraction(314159/100000) " />
</form>
<span id="commSav9-206" class="commSav" >c := continuedFraction(314159/100000) </span>
<div id="mathAns9-206" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mn>3</mn><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>7</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>15</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>1</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>25</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>1</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>7</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>4</mn></mrow></mfrac></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: ContinuedFraction Integer
</div>



<p>This display is a compact form of the bulkier
</p>



<div class="verbatim"><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------------------------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;25&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;+&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4<br />
</div>



<p>You can write any rational number in a similar form.  The fraction
will be finite and you can always take the ``numerators'' to be <span class="teletype">1</span>.
That is, any rational number can be written as a simple, finite
continued fraction of the form
</p>




<div class="verbatim"><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a(1)&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------------------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a(2)&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--------------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a(3)&nbsp;+<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a(n-1)&nbsp;+&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a(n)<br />
</div>



<p>The  <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow></mstyle></math> are called partial quotients and the operation
<span class="spadfunFrom" >partialQuotients</span><span class="index">partialQuotients</span><a name="chapter-9-67"/><span class="index">ContinuedFraction</span><a name="chapter-9-68"/> creates a stream of them.
</p>




<div id="spadComm9-207" class="spadComm" >
<form id="formComm9-207" action="javascript:makeRequest('9-207');" >
<input id="comm9-207" type="text" class="command" style="width: 13em;" value="partialQuotients c " />
</form>
<span id="commSav9-207" class="commSav" >partialQuotients c </span>
<div id="mathAns9-207" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>[</mo><mn>3</mn><mo>,</mo><mn>7</mn><mo>,</mo><mn>15</mn><mo>,</mo><mn>1</mn><mo>,</mo><mn>25</mn><mo>,</mo><mn>1</mn><mo>,</mo><mn>7</mn><mo>,</mo><mo>&#x2026;</mo><mo>]</mo></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Stream Integer
</div>



<p>By considering more and more of the fraction, you get the
<span class="spadfunFrom" >convergents</span><span class="index">convergents</span><a name="chapter-9-69"/><span class="index">ContinuedFraction</span><a name="chapter-9-70"/>.  For example, the first
convergent is  <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><msub><mi>a</mi><mn>1</mn></msub></mrow></mstyle></math>, the second is  <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><msub><mi>a</mi><mn>1</mn></msub><mo>+</mo><mn>1</mn><mo>/</mo><msub><mi>a</mi><mn>2</mn></msub></mrow></mstyle></math> and so on.
</p>




<div id="spadComm9-208" class="spadComm" >
<form id="formComm9-208" action="javascript:makeRequest('9-208');" >
<input id="comm9-208" type="text" class="command" style="width: 10em;" value="convergents c " />
</form>
<span id="commSav9-208" class="commSav" >convergents c </span>
<div id="mathAns9-208" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>[</mo><mn>3</mn><mo>,</mo><mfrac><mn>22</mn><mn>7</mn></mfrac><mo>,</mo><mfrac><mn>333</mn><mn>106</mn></mfrac><mo>,</mo><mfrac><mn>355</mn><mn>113</mn></mfrac><mo>,</mo><mfrac><mn>9208</mn><mn>2931</mn></mfrac><mo>,</mo><mfrac><mn>9563</mn><mn>3044</mn></mfrac><mo>,</mo><mfrac><mn>76149</mn><mn>24239</mn></mfrac><mo>,</mo><mo>&#x2026;</mo><mo>]</mo></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Stream Fraction Integer
</div>



<p>Since this is a finite continued fraction, the last convergent is the
original rational number, in reduced form.  The result of
<span class="spadfunFrom" >approximants</span><span class="index">approximants</span><a name="chapter-9-71"/><span class="index">ContinuedFraction</span><a name="chapter-9-72"/> is always an infinite
stream, though it may just repeat the ``last'' value.
</p>




<div id="spadComm9-209" class="spadComm" >
<form id="formComm9-209" action="javascript:makeRequest('9-209');" >
<input id="comm9-209" type="text" class="command" style="width: 10em;" value="approximants c " />
</form>
<span id="commSav9-209" class="commSav" >approximants c </span>
<div id="mathAns9-209" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>[</mo><mn>3</mn><mo>,</mo><mfrac><mn>22</mn><mn>7</mn></mfrac><mo>,</mo><mfrac><mn>333</mn><mn>106</mn></mfrac><mo>,</mo><mfrac><mn>355</mn><mn>113</mn></mfrac><mo>,</mo><mfrac><mn>9208</mn><mn>2931</mn></mfrac><mo>,</mo><mfrac><mn>9563</mn><mn>3044</mn></mfrac><mo>,</mo><mfrac><mn>76149</mn><mn>24239</mn></mfrac><mo>,</mo><mo>&#x2026;</mo><mo>]</mo></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Stream Fraction Integer
</div>



<p>Inverting <span class="teletype">c</span> only changes the partial quotients of its fraction
by inserting a <span class="teletype">0</span> at the beginning of the list.
</p>




<div id="spadComm9-210" class="spadComm" >
<form id="formComm9-210" action="javascript:makeRequest('9-210');" >
<input id="comm9-210" type="text" class="command" style="width: 19em;" value="pq := partialQuotients(1/c) " />
</form>
<span id="commSav9-210" class="commSav" >pq := partialQuotients(1/c) </span>
<div id="mathAns9-210" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>[</mo><mn>0</mn><mo>,</mo><mn>3</mn><mo>,</mo><mn>7</mn><mo>,</mo><mn>15</mn><mo>,</mo><mn>1</mn><mo>,</mo><mn>25</mn><mo>,</mo><mn>1</mn><mo>,</mo><mo>&#x2026;</mo><mo>]</mo></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Stream Integer
</div>



<p>Do this to recover the original continued fraction from this list of
partial quotients.  The three-argument form of the
<span class="spadfunFrom" >continuedFraction</span><span class="index">continuedFraction</span><a name="chapter-9-73"/><span class="index">ContinuedFraction</span><a name="chapter-9-74"/> operation takes an
element which is the whole part of the fraction, a stream of elements
which are the numerators of the fraction, and a stream of elements
which are the denominators of the fraction.
</p>




<div id="spadComm9-211" class="spadComm" >
<form id="formComm9-211" action="javascript:makeRequest('9-211');" >
<input id="comm9-211" type="text" class="command" style="width: 34em;" value="continuedFraction(first pq,repeating [1],rest pq) " />
</form>
<span id="commSav9-211" class="commSav" >continuedFraction(first pq,repeating [1],rest pq) </span>
<div id="mathAns9-211" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>3</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>7</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>15</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>1</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>25</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>1</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>7</mn></mrow></mfrac></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: ContinuedFraction Integer
</div>



<p>The streams need not be finite for
<span class="spadfunFrom" >continuedFraction</span><span class="index">continuedFraction</span><a name="chapter-9-75"/><span class="index">ContinuedFraction</span><a name="chapter-9-76"/>.  Can you guess
which irrational number has the following continued fraction?  See the
end of this section for the answer.
</p>




<div id="spadComm9-212" class="spadComm" >
<form id="formComm9-212" action="javascript:makeRequest('9-212');" >
<input id="comm9-212" type="text" class="command" style="width: 36em;" value="z:=continuedFraction(3,repeating [1],repeating [3,6]) " />
</form>
<span id="commSav9-212" class="commSav" >z:=continuedFraction(3,repeating [1],repeating [3,6]) </span>
<div id="mathAns9-212" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mn>3</mn><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>3</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>6</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>3</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>6</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>3</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>6</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>3</mn></mrow></mfrac></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: ContinuedFraction Integer
</div>



<p>In 1737 Euler discovered the infinite continued fraction expansion
</p>



<div class="verbatim"><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e&nbsp;-&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----&nbsp;=&nbsp;---------------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;14&nbsp;+&nbsp;...<br />
</div>



<p>We use this expansion to compute rational and floating point
approximations of <span class="teletype">e</span>.  <span class="footnote">For this and other interesting
expansions, see C. D. Olds, <span class="italic">Continued Fractions,</span> New
Mathematical Library, (New York: Random House, 1963), pp.  134--139.</span>
</p>


<p>By looking at the above expansion, we see that the whole part is <span class="teletype">0</span>
and the numerators are all equal to <span class="teletype">1</span>.  This constructs the
stream of denominators.
</p>




<div id="spadComm9-213" class="spadComm" >
<form id="formComm9-213" action="javascript:makeRequest('9-213');" >
<input id="comm9-213" type="text" class="command" style="width: 36em;" value="dens:Stream Integer := cons(1,generate((x+->x+4),6)) " />
</form>
<span id="commSav9-213" class="commSav" >dens:Stream Integer := cons(1,generate((x+->x+4),6)) </span>
<div id="mathAns9-213" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>[</mo><mn>1</mn><mo>,</mo><mn>6</mn><mo>,</mo><mn>10</mn><mo>,</mo><mn>14</mn><mo>,</mo><mn>18</mn><mo>,</mo><mn>22</mn><mo>,</mo><mn>26</mn><mo>,</mo><mo>&#x2026;</mo><mo>]</mo></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Stream Integer
</div>



<p>Therefore this is the continued fraction expansion for
 <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><mo>(</mo><mi>e</mi><mo>-</mo><mn>1</mn><mo>)</mo><mo>/</mo><mn>2</mn></mrow></mstyle></math>.
</p>




<div id="spadComm9-214" class="spadComm" >
<form id="formComm9-214" action="javascript:makeRequest('9-214');" >
<input id="comm9-214" type="text" class="command" style="width: 31em;" value="cf := continuedFraction(0,repeating [1],dens) " />
</form>
<span id="commSav9-214" class="commSav" >cf := continuedFraction(0,repeating [1],dens) </span>
<div id="mathAns9-214" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>1</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>6</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>10</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>14</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>18</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>22</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>26</mn></mrow></mfrac></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: ContinuedFraction Integer
</div>



<p>These are the rational number convergents.
</p>




<div id="spadComm9-215" class="spadComm" >
<form id="formComm9-215" action="javascript:makeRequest('9-215');" >
<input id="comm9-215" type="text" class="command" style="width: 15em;" value="ccf := convergents cf " />
</form>
<span id="commSav9-215" class="commSav" >ccf := convergents cf </span>
<div id="mathAns9-215" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo>,</mo><mfrac><mn>6</mn><mn>7</mn></mfrac><mo>,</mo><mfrac><mn>61</mn><mn>71</mn></mfrac><mo>,</mo><mfrac><mn>860</mn><mn>1001</mn></mfrac><mo>,</mo><mfrac><mn>15541</mn><mn>18089</mn></mfrac><mo>,</mo><mfrac><mn>342762</mn><mn>398959</mn></mfrac><mo>,</mo><mo>&#x2026;</mo><mo>]</mo></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Stream Fraction Integer
</div>



<p>You can get rational convergents for <span class="teletype">e</span> by multiplying by <span class="teletype">2</span> and
adding <span class="teletype">1</span>.
</p>




<div id="spadComm9-216" class="spadComm" >
<form id="formComm9-216" action="javascript:makeRequest('9-216');" >
<input id="comm9-216" type="text" class="command" style="width: 26em;" value="eConvergents := [2*e + 1 for e in ccf] " />
</form>
<span id="commSav9-216" class="commSav" >eConvergents := [2*e + 1 for e in ccf] </span>
<div id="mathAns9-216" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>[</mo><mn>1</mn><mo>,</mo><mn>3</mn><mo>,</mo><mfrac><mn>19</mn><mn>7</mn></mfrac><mo>,</mo><mfrac><mn>193</mn><mn>71</mn></mfrac><mo>,</mo><mfrac><mn>2721</mn><mn>1001</mn></mfrac><mo>,</mo><mfrac><mn>49171</mn><mn>18089</mn></mfrac><mo>,</mo><mfrac><mn>1084483</mn><mn>398959</mn></mfrac><mo>,</mo><mo>&#x2026;</mo><mo>]</mo></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Stream Fraction Integer
</div>



<p>You can also compute the floating point approximations to these convergents.
</p>




<div id="spadComm9-217" class="spadComm" >
<form id="formComm9-217" action="javascript:makeRequest('9-217');" >
<input id="comm9-217" type="text" class="command" style="width: 20em;" value="eConvergents :: Stream Float " />
</form>
<span id="commSav9-217" class="commSav" >eConvergents :: Stream Float </span>
<div id="mathAns9-217" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtable><mtr><mtd><mo>[</mo><mrow><mn>1</mn><mo>.</mo><mn>0</mn></mrow><mo>,</mo><mrow><mn>3</mn><mo>.</mo><mn>0</mn></mrow><mo>,</mo><mrow><mn>2</mn><mo>.</mo><mn>7142857142</mn><mn>857142857</mn></mrow><mo>,</mo><mrow><mn>2</mn><mo>.</mo><mn>7183098591</mn><mn>549295775</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd></mtd></mtr><mtr><mtd><mrow><mn>2</mn><mo>.</mo><mn>7182817182</mn><mn>817182817</mn></mrow><mo>,</mo><mrow><mn>2</mn><mo>.</mo><mn>7182818287</mn><mn>356957267</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd></mtd></mtr><mtr><mtd><mrow><mn>2</mn><mo>.</mo><mn>7182818284</mn><mspace width="0.5 em" /><mn>585634113</mn></mrow><mo>,</mo><mo>&#x2026;</mo><mo>]</mo></mtd></mtr></mtable></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Stream Float
</div>



<p>Compare this to the value of <span class="teletype">e</span> computed by the
<span class="spadfunFrom" >exp</span><span class="index">exp</span><a name="chapter-9-77"/><span class="index">Float</span><a name="chapter-9-78"/> operation in <span class="teletype">Float</span>.
</p>




<div id="spadComm9-218" class="spadComm" >
<form id="formComm9-218" action="javascript:makeRequest('9-218');" >
<input id="comm9-218" type="text" class="command" style="width: 5em;" value="exp 1.0" />
</form>
<span id="commSav9-218" class="commSav" >exp 1.0</span>
<div id="mathAns9-218" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mn>2</mn><mo>.</mo><mn>7182818284</mn><mspace width="0.5 em" /><mn>590452354</mn></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Float
</div>



<p>In about 1658, Lord Brouncker established the following expansion
for  <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><mn>4</mn><mo>/</mo><mi>&#x03C0;</mi></mrow></mstyle></math>,
</p>



<div class="verbatim"><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;25<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;49<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;81<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;+&nbsp;...<br />
</div>



<p>Let's use this expansion to compute rational and floating point
approximations for  <math xmlns="&mathml;" mathsize="big"><mstyle><mi>&#x03C0;</mi></mstyle></math>.
</p>




<div id="spadComm9-219" class="spadComm" >
<form id="formComm9-219" action="javascript:makeRequest('9-219');" >
<input id="comm9-219" type="text" class="command" style="width: 44em;" value="cf := continuedFraction(1,[(2*i+1)**2 for i in 0..],repeating [2])" />
</form>
<span id="commSav9-219" class="commSav" >cf := continuedFraction(1,[(2*i+1)**2 for i in 0..],repeating [2])</span>
<div id="mathAns9-219" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mn>1</mn><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>2</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>9</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>2</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>25</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>2</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>49</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>2</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>81</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>2</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>121</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>2</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>169</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>2</mn></mrow></mfrac></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: ContinuedFraction Integer
</div>





<div id="spadComm9-220" class="spadComm" >
<form id="formComm9-220" action="javascript:makeRequest('9-220');" >
<input id="comm9-220" type="text" class="command" style="width: 15em;" value="ccf := convergents cf " />
</form>
<span id="commSav9-220" class="commSav" >ccf := convergents cf </span>
<div id="mathAns9-220" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>[</mo><mn>1</mn><mo>,</mo><mfrac><mn>3</mn><mn>2</mn></mfrac><mo>,</mo><mfrac><mn>15</mn><mn>13</mn></mfrac><mo>,</mo><mfrac><mn>105</mn><mn>76</mn></mfrac><mo>,</mo><mfrac><mn>315</mn><mn>263</mn></mfrac><mo>,</mo><mfrac><mn>3465</mn><mn>2578</mn></mfrac><mo>,</mo><mfrac><mn>45045</mn><mn>36979</mn></mfrac><mo>,</mo><mo>&#x2026;</mo><mo>]</mo></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Stream Fraction Integer
</div>





<div id="spadComm9-221" class="spadComm" >
<form id="formComm9-221" action="javascript:makeRequest('9-221');" >
<input id="comm9-221" type="text" class="command" style="width: 24em;" value="piConvergents := [4/p for p in ccf] " />
</form>
<span id="commSav9-221" class="commSav" >piConvergents := [4/p for p in ccf] </span>
<div id="mathAns9-221" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>[</mo><mn>4</mn><mo>,</mo><mfrac><mn>8</mn><mn>3</mn></mfrac><mo>,</mo><mfrac><mn>52</mn><mn>15</mn></mfrac><mo>,</mo><mfrac><mn>304</mn><mn>105</mn></mfrac><mo>,</mo><mfrac><mn>1052</mn><mn>315</mn></mfrac><mo>,</mo><mfrac><mn>10312</mn><mn>3465</mn></mfrac><mo>,</mo><mfrac><mn>147916</mn><mn>45045</mn></mfrac><mo>,</mo><mo>&#x2026;</mo><mo>]</mo></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Stream Fraction Integer
</div>



<p>As you can see, the values are converging to
 <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><mi>&#x03C0;</mi><mo>=</mo><mn>3</mn><mo>.</mo><mn>14159265358979323846</mn><mo>.</mo><mo>.</mo><mo>.</mo></mrow></mstyle></math>,
but not very quickly.
</p>




<div id="spadComm9-222" class="spadComm" >
<form id="formComm9-222" action="javascript:makeRequest('9-222');" >
<input id="comm9-222" type="text" class="command" style="width: 20em;" value="piConvergents :: Stream Float " />
</form>
<span id="commSav9-222" class="commSav" >piConvergents :: Stream Float </span>
<div id="mathAns9-222" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtable><mtr><mtd><mo>[</mo><mrow><mn>4</mn><mo>.</mo><mn>0</mn></mrow><mo>,</mo><mrow><mn>2</mn><mo>.</mo><mn>6666666666</mn><mspace width="0.5 em" /><mn>666666667</mn></mrow><mo>,</mo><mrow><mn>3</mn><mo>.</mo><mn>4666666666</mn><mspace width="0.5 em" /><mn>666666667</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd></mtd></mtr><mtr><mtd><mrow><mn>2</mn><mo>.</mo><mn>8952380952</mn><mspace width="0.5 em" /><mn>380952381</mn></mrow><mo>,</mo><mrow><mn>3</mn><mo>.</mo><mn>3396825396</mn><mspace width="0.5 em" /><mn>825396825</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd></mtd></mtr><mtr><mtd><mrow><mn>2</mn><mo>.</mo><mn>9760461760</mn><mspace width="0.5 em" /><mn>461760462</mn></mrow><mo>,</mo><mrow><mn>3</mn><mo>.</mo><mn>2837384837</mn><mspace width="0.5 em" /><mn>384837385</mn></mrow><mo>,</mo><mo>&#x2026;</mo><mo>]</mo></mtd></mtr></mtable></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Stream Float
</div>



<p>You need not restrict yourself to continued fractions of integers.
Here is an expansion for a quotient of Gaussian integers.
</p>




<div id="spadComm9-223" class="spadComm" >
<form id="formComm9-223" action="javascript:makeRequest('9-223');" >
<input id="comm9-223" type="text" class="command" style="width: 32em;" value="continuedFraction((- 122 + 597*%i)/(4 - 4*%i))" />
</form>
<span id="commSav9-223" class="commSav" >continuedFraction((- 122 + 597*%i)/(4 - 4*%i))</span>
<div id="mathAns9-223" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mo>-</mo><mn>90</mn><mo>+</mo><mrow><mn>59</mn><mspace width="0.5 em" /><mi>i</mi></mrow><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mn>1</mn><mo>-</mo><mn>2</mn><mspace width="0.5 em" /><mi>i</mi></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mo>-</mo><mn>1</mn><mo>+</mo><mn>2</mn><mspace width="0.5 em" /><mi>i</mi></mrow></mfrac></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: ContinuedFraction Complex Integer
</div>



<p>This is an expansion for a quotient of polynomials in one variable
with rational number coefficients.
</p>




<div id="spadComm9-224" class="spadComm" >
<form id="formComm9-224" action="javascript:makeRequest('9-224');" >
<input id="comm9-224" type="text" class="command" style="width: 36em;" value="r : Fraction UnivariatePolynomial(x,Fraction Integer) " />
</form>
<span id="commSav9-224" class="commSav" >r : Fraction UnivariatePolynomial(x,Fraction Integer) </span>
<div id="mathAns9-224" ></div>
</div>




<div class="returnType">
Type: Void
</div>





<div id="spadComm9-225" class="spadComm" >
<form id="formComm9-225" action="javascript:makeRequest('9-225');" >
<input id="comm9-225" type="text" class="command" style="width: 29em;" value="r := ((x - 1) * (x - 2)) / ((x-3) * (x-4)) " />
</form>
<span id="commSav9-225" class="commSav" >r := ((x - 1) * (x - 2)) / ((x-3) * (x-4)) </span>
<div id="mathAns9-225" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mfrac><mrow><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><mo>-</mo><mrow><mn>3</mn><mspace width="0.5 em" /><mi>x</mi></mrow><mo>+</mo><mn>2</mn></mrow><mrow><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><mo>-</mo><mrow><mn>7</mn><mspace width="0.5 em" /><mi>x</mi></mrow><mo>+</mo><mn>12</mn></mrow></mfrac></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Fraction UnivariatePolynomial(x,Fraction Integer)
</div>





<div id="spadComm9-226" class="spadComm" >
<form id="formComm9-226" action="javascript:makeRequest('9-226');" >
<input id="comm9-226" type="text" class="command" style="width: 14em;" value="continuedFraction r " />
</form>
<span id="commSav9-226" class="commSav" >continuedFraction r </span>
<div id="mathAns9-226" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mn>1</mn><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mfrac><mn>1</mn><mn>4</mn></mfrac><mi>x</mi><mo>-</mo><mfrac><mn>9</mn><mn>8</mn></mfrac></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>|</mo></mrow><mrow><mo>|</mo><mfrac><mn>16</mn><mn>3</mn></mfrac><mi>x</mi><mo>-</mo><mfrac><mn>40</mn><mn>3</mn></mfrac></mrow></mfrac></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: ContinuedFraction UnivariatePolynomial(x,Fraction Integer)
</div>



<p>To conclude this section, we give you evidence that
</p>



<div class="verbatim"><br />
&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;=&nbsp;3&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;+&nbsp;...<br />
</div>



<p>is the expansion of  <math xmlns="&mathml;" mathsize="big"><mstyle><mrow><msqrt><mn>11</mn></msqrt></mrow></mstyle></math>.
</p>




<div id="spadComm9-227" class="spadComm" >
<form id="formComm9-227" action="javascript:makeRequest('9-227');" >
<input id="comm9-227" type="text" class="command" style="width: 31em;" value="[i*i for i in convergents(z) :: Stream Float] " />
</form>
<span id="commSav9-227" class="commSav" >[i*i for i in convergents(z) :: Stream Float] </span>
<div id="mathAns9-227" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtable><mtr><mtd><mo>[</mo><mrow><mn>9</mn><mo>.</mo><mn>0</mn></mrow><mo>,</mo><mrow><mn>11</mn><mo>.</mo><mn>1111111111</mn><mspace width="0.5 em" /><mn>11111111</mn></mrow><mo>,</mo><mrow><mn>10</mn><mo>.</mo><mn>9944598337</mn><mspace width="0.5 em" /><mn>9501385</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd></mtd></mtr><mtr><mtd><mrow><mn>11</mn><mo>.</mo><mn>0002777777</mn><mspace width="0.5 em" /><mn>77777778</mn></mrow><mo>,</mo><mrow><mn>10</mn><mo>.</mo><mn>9999860763</mn><mspace width="0.5 em" /><mn>98799786</mn></mrow><mo>,</mo></mtd></mtr><mtr><mtd></mtd></mtr><mtr><mtd><mrow><mn>11</mn><mo>.</mo><mn>0000006979</mn><mspace width="0.5 em" /><mn>29731039</mn></mrow><mo>,</mo><mrow><mn>10</mn><mo>.</mo><mn>9999999650</mn><mspace width="0.5 em" /><mn>15834446</mn></mrow><mo>,</mo><mo>&#x2026;</mo><mo>]</mo></mtd></mtr></mtable></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: Stream Float
</div>





</div><a href="book-contents.xhtml" style="margin-right: 10px;">Book Contents</a>
<a href="section-9.11.xhtml" style="margin-right: 10px;">Previous Section 9.11 Complex</a><a href="section-9.13.xhtml" style="margin-right: 10px;">Next Section 9.13  CycleIndicators</a><a href="book-index.xhtml">Book Index</a></body>
</html>